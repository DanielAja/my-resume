{"ast":null,"code":"import { ElementRef, EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nconst _c0 = [\"tiles\"];\nconst _c1 = function () {\n  return {\n    \"tile\": 1\n  };\n};\nfunction BackgroundGridComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 3);\n    i0.ɵɵlistener(\"click\", function BackgroundGridComponent_div_2_Template_div_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.onClick(item_r2, !ctx_r3.isActive, true));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction0(1, _c1));\n  }\n}\nexport class BackgroundGridComponent {\n  constructor(cdref) {\n    this.cdref = cdref;\n    this.col = Math.floor(document.body.clientWidth / 50);\n    this.row = Math.floor(document.body.clientHeight / 50);\n    this.createSquares = qua => {\n      this.items = [...Array(qua).keys()];\n    };\n    this.createGrid = () => {\n      this.col = Math.floor(document.body.clientWidth / 50);\n      this.row = Math.floor(document.body.clientHeight / 50) + 1;\n      this.tiles.nativeElement.style.setProperty('--col', this.col);\n      this.tiles.nativeElement.style.setProperty('--row', this.row);\n      this.createSquares(this.col * this.row);\n    };\n    this.isActive = false;\n    this.start = false;\n    this.messageEvent = new EventEmitter();\n  }\n  ngAfterViewInit() {\n    this.createGrid();\n    window.addEventListener('resize', this.createGrid);\n    this.cdref.detectChanges();\n  }\n  onClick(index, setValue = true, userClick = false) {\n    const tile = this.tiles.nativeElement.querySelector(`div:nth-child(${index + 1})`);\n    if (tile.classList.contains('active') === setValue || this.start === false) {\n      return;\n    }\n    if (setValue) {\n      tile.classList.toggle('active', true);\n    } else {\n      if (!tile.classList.contains('active')) {\n        return;\n      }\n      tile.classList.toggle('active', false);\n    }\n    if (userClick) {\n      this.isActive = !this.isActive;\n      this.messageEvent.emit(\"Hola Mundo!\");\n    }\n    const indices = [index + this.col, index - this.col, index - 1, index + 1];\n    for (const i of indices) {\n      const count = this.col * this.row;\n      if (i >= 0 && i < count && (i % this.col !== 0 || index % this.col !== this.col - 1)) {\n        setTimeout(() => this.onClick(i, setValue), 50);\n      }\n    }\n  }\n  ngOnChanges() {\n    if (this.message === undefined) {\n      return;\n    }\n    this.start = true;\n    this.onClick(Number(this.message), true, true);\n  }\n}\nBackgroundGridComponent.ɵfac = function BackgroundGridComponent_Factory(t) {\n  return new (t || BackgroundGridComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\nBackgroundGridComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BackgroundGridComponent,\n  selectors: [[\"app-background-grid\"]],\n  viewQuery: function BackgroundGridComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5, ElementRef);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.tiles = _t.first);\n    }\n  },\n  inputs: {\n    message: \"message\"\n  },\n  outputs: {\n    messageEvent: \"messageEvent\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 3,\n  vars: 1,\n  consts: [[1, \"tiles\"], [\"tiles\", \"\"], [4, \"ngFor\", \"ngForOf\"], [3, \"ngClass\", \"click\"]],\n  template: function BackgroundGridComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0, 1);\n      i0.ɵɵtemplate(2, BackgroundGridComponent_div_2_Template, 2, 2, \"div\", 2);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.items);\n    }\n  },\n  dependencies: [i1.NgClass, i1.NgForOf],\n  styles: [\".tiles[_ngcontent-%COMP%]{height:100%;width:100%;display:grid;grid-template-columns:repeat(var(--col),1fr);grid-template-rows:repeat(var(--row),1fr);position:absolute;top:0;left:0}.tile[_ngcontent-%COMP%]{top:auto;left:auto;height:50px;width:50px;width:100%;margin:0}.active[_ngcontent-%COMP%]{background-color:#0f62fe}.active[_ngcontent-%COMP%]:hover{background-color:#0f63fec5}\"]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}